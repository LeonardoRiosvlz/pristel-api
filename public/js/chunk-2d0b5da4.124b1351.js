(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b5da4"],{"1b52":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",[a("PageHeader",{attrs:{title:t.title,items:t.items}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h4",{staticClass:"card-title"}),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"dataTables_length",attrs:{id:"tickets-table_length"}},[a("label",{staticClass:"d-inline-flex align-items-center"},[t._v(" Show "),a("b-form-select",{attrs:{size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),t._v(" entries ")],1)])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"dataTables_filter text-md-right",attrs:{id:"tickets-table_filter"}},[a("label",{staticClass:"d-inline-flex align-items-center"},[t._v(" Search: "),a("b-form-input",{staticClass:"form-control form-control-sm ml-2",attrs:{type:"search",placeholder:"Search..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)])])]),a("div",{staticClass:"table-responsive mb-0"},[a("b-table",{attrs:{items:t.sacs,fields:t.fields,responsive:"sm","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(Consecutivo)",fn:function(e){return[t._v(" ATH-"+t._s(e.item.id_programacion)+" ")]}},{key:"cell(total)",fn:function(e){return[t._v(" "+t._s(t._f("moneda")(parseFloat(e.item.total)))+" ")]}},{key:"cell(actions)",fn:function(e){return[a("b-dropdown",{attrs:{size:"sm"},scopedSlots:t._u([{key:"button-content",fn:function(){return[t._v(" Action "),a("i",{staticClass:"mdi mdi-chevron-down"})]},proxy:!0}],null,!0)},[a("b-dropdown-item-button",{on:{click:function(a){t.editMode=!0,t.ver=!1,t.setear(e.item.id)}}},[t._v(" Editar ")]),a("b-dropdown-item-button",{on:{click:function(a){return t.eliminarCajero(e.item.id)}}},[t._v(" Eliminar ")]),a("b-dropdown-item-button",{on:{click:function(a){t.editMode=!1,t.ver=!0,t.setear(e.item.id)}}},[t._v(" Ver ")]),a("b-dropdown-item-button",{on:{click:function(a){t.editMode=!1,t.ver=!0,t.detalles(e.item)}}},[t._v(" Detalles ")])],1)]}}])})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"dataTables_paginate paging_simple_numbers float-right"},[a("ul",{staticClass:"pagination pagination-rounded mb-0"},[a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])])])])])]),a("b-modal",{attrs:{id:"modal",false:"",size:"lg",title:"Gesti√≥n de servicios a cobro ATH","hide-footer":""}},[a("p",{staticStyle:{"font-size":"23px"}},[t._v("Consecutivo:"),a("b",{staticClass:"mx-auto"},[t._v(" ATH-"+t._s(t.form.id))])]),a("table",{staticClass:"table my-3"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("ITEM")]),a("th",{attrs:{scope:"col"}},[t._v("PRODUCTO ")]),a("th",{attrs:{scope:"col"}},[t._v("VALOR UNITARIO")]),a("th",{attrs:{scope:"col"}},[t._v("CANTIDAD")]),a("th",{attrs:{scope:"col"}},[t._v("TOTAL")])])]),a("tbody",t._l(t.form.items,(function(e){return a("tr",{key:e.id},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e.id))]),a("td",[t._v(t._s(e.descripcion))]),a("td",[t._v(t._s(t._f("moneda")(e.precio)))]),a("td",[t._v(t._s(e.cantidad))]),a("td",[t._v(t._s(t._f("moneda")(e.total)))])])})),0)]),a("p",{staticStyle:{"font-size":"23px"}},[t._v("Total:"),a("b",{staticClass:"mx-auto"},[t._v(t._s(t._f("moneda")(t.form.total)))])]),t.ver||t.editMode?t._e():a("button",{staticClass:"btn btn-block float-right btn-success",on:{click:t.switchLoc}},[t._v("Guardar")]),!t.ver&&t.editMode?a("button",{staticClass:"btn btn-block float-right btn-success",on:{click:t.switchLoc}},[t._v("Editar")]):t._e()])],1)},i=[],o=a("ade3"),r=a("1da1"),n=a("5530"),c=(a("2b3d"),a("d3b7"),a("3ca3"),a("ddb0"),a("96cf"),a("6dfc"),a("4a7a")),l=a.n(c),d=a("8e5f"),u=a.n(d),m=a("2f62"),f=a("7bb1"),h=a("5658"),p=a("2579"),v=a("3375"),b=Object(o["a"])({components:{Layout:h["a"],PageHeader:p["a"],ValidationProvider:f["b"],ValidationObserver:f["a"],vSelect:l.a,Multiselect:u.a},data:function(){return{tipologia:v["a"],title:"Procesos",items:[{text:"Servicios a coboro"},{text:"ATH",active:!0}],dropzoneOptions:{thumbnailWidth:150,maxFilesize:.5,headers:{"My-Awesome-Header":"header value"}},ver:!1,url:"",url_firma:"",modal:!0,file:null,firma:null,email:"",password:"",totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],entidades:[],sortBy:"age",sortDesc:!1,fields:["Consecutivo","total","status","actions"],sacs:[],ciudades:[],regional:[],seguridad:[],editMode:!1,form:{id:"",nombre_tercero:"",descripcion_tercero:"",ciudades_id:"",cierre_nocturno:"",mantenimiento:"",compartido_con:null}}},computed:Object(n["a"])({},Object(m["d"])(["counter"])),filters:{moneda:function(t){var e=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:1}),a=e.format(t);return a}},methods:Object(n["a"])(Object(n["a"])({onFiltered:function(t){this.totalRows=t.length,this.currentPage=1}},Object(m["b"])(["guardarUsuario"])),{},{switchLoc:function(){var t=this;this.editMode?this.$refs.form.validate().then((function(e){e&&t.editarsacs()})):this.$refs.form.validate().then((function(e){e&&t.agregarCajero()}))},detalles:function(t){console.log(t),this.$router.push({name:"cajero_details",params:{id:t.id,entidad:t.id_entidad}})},agregarCajero:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i in a=new FormData,s=t.form,s)a.append(i,s[i]);return e.next=5,t.axios.post("api/sacs/ath",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){if(200==e.status)for(var a in t.$swal("Agregado exito!","","success"),t.listarSac(),t.$root.$emit("bv::hide::modal","modal","#btnShow"),s)t.form[a]=""})).catch((function(e){console.log(e.response.data.menssage),t.$swal(e.response.data)}));case 5:case"end":return e.stop()}}),e)})))()},editarsacs:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(i in a=new FormData,s=t.form,s)a.append(i,s[i]);return e.next=5,t.axios.put("api/sacs/ath",a).then((function(e){if(200===e.status)for(var a in t.$swal("Editado con exito","","success"),t.listarSac(),t.$root.$emit("bv::hide::modal","modal","#btnShow"),s)t.form[a]=""})).catch((function(e){console.log(e),t.$swal("No se pudo editar","","warning")}));case 5:case"end":return e.stop()}}),e)})))()},eliminarsacs:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=new FormData,s.append("id",t),a.next=4,e.axios.post("api/sacs/ath/delete",s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200==t.status&&(e.$swal("Eliminado con exito!","","success"),e.listarSac())})).catch((function(t){console.log(t.response.data.menssage),e.$swal(t.response.data)}));case 4:case"end":return a.stop()}}),a)})))()},eliminarCajero:function(t){var e=this;this.$swal({title:"Desea borrar este cajero?",icon:"question",iconHtml:"",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,showCloseButton:!0}).then((function(a){a.isConfirmed&&e.eliminarsacs(t)}))},resete:function(){var t=this.form;for(var e in t)this.form[e]=""},setear:function(t){for(var e=0;e<this.sacs.length;e++)if(this.sacs[e].id===t)return this.form.id=this.sacs[e].id,this.form.consecutivo=this.sacs[e].id_programacion,this.form.total=this.sacs[e].total,this.form.items=JSON.parse(this.sacs[e].items),this.form.items=JSON.parse(this.form.items),void this.$root.$emit("bv::show::modal","modal","#btnShow")},listarSac:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios.get("api/sac/ath").then((function(e){t.sacs=e.data.rows})).catch((function(t){console.log("error"+t)}));case 2:case"end":return e.stop()}}),e)})))()},setEmail:function(){this.form.username=this.form.email,console.log("holas")},onFileChange:function(t){var e=t.target.files[0];this.url=URL.createObjectURL(e)},toggleModal:function(){this.modal=!this.modal},session:function(){if(localStorage.getItem("token")){var t=localStorage.getItem("token");this.guardarUsuario(t)}else this.$router.push({name:"Home"})}}),created:function(){this.session(),this.listarSac(),this.listarEntidades(),this.listarregional(),this.listarseguridad()}},"computed",{rows:function(){return this.sacs.length}}),g=b,_=a("2877"),w=Object(_["a"])(g,s,i,!1,null,null,null);e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d0b5da4.124b1351.js.map