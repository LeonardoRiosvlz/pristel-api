(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b62fc"],{"1ba6":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Layout",[e("PageHeader",{attrs:{title:t.title,items:t.items}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("div",[e("b-tabs",[e("b-tab",{attrs:{active:""},scopedSlots:t._u([{key:"title",fn:function(){return[e("b-spinner",{attrs:{type:"",small:""}}),t._v("ATH "),e("strong"),e("b-badge",{attrs:{pill:"",variant:"danger"}},[t._v(t._s(t.serviciosAth.length))])]},proxy:!0}])},[e("div",{staticClass:"row"},t._l(t.serviciosAth,(function(a){return e("div",{key:a.id,staticClass:"col-lg-6"},[e("b-card",[e("b-dropdown",{staticClass:"float-right",attrs:{right:"","toggle-class":"arrow-none card-drop",variant:"white"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("i",{staticClass:"mdi mdi-dots-vertical"})]},proxy:!0}],null,!0)},[e("b-dropdown-item",{on:{click:function(e){return t.rechazar(a)}}},[t._v("Rechazar")])],1),e("b-row",{staticClass:"align-items-center",attrs:{"no-gutters":""}},[e("b-col",{attrs:{md:"3"}},[e("b-card-img",{staticClass:"rounded-0",attrs:{src:a.cajero_ath.entidad.imagen}})],1),e("b-col",{attrs:{md:"9"}},[e("b-card-body",{attrs:{title:a.tipo_llamada+"-"+a.llamada}},[e("b-card-text",{staticClass:"m-0"},[t._v("Consecutivo:ATH-"+t._s(a.id))]),e("b-card-text",{staticClass:"m-0"},[t._v(t._s(a.titulo))]),e("b-card-text",{staticClass:"m-0"},[t._v(t._s(a.descripcion))]),e("b-card-text",{staticClass:"m-0"},[t._v("Terminal: "+t._s(a.cajero_ath.terminal))]),e("b-card-text",{staticClass:"m-0"},[t._v("Dirección: "+t._s(a.cajero_ath.direccion))]),e("b-card-text",{staticClass:"m-0"},[t._v("Cita: "+t._s(a.requiere_cita))]),"En proceso"===a.status?e("b-badge",{attrs:{variant:"success"}},[t._v("En proceso")]):t._e(),"Pendiente"===a.status?e("b-badge",{attrs:{variant:"warning"}},[t._v("Pendiente")]):t._e(),"Programada"===a.status?e("b-badge",{attrs:{variant:"info"}},[t._v("Programada")]):t._e(),"Reprogramada"===a.status?e("b-badge",{attrs:{variant:"info"}},[t._v("Reprogramada")]):t._e(),"Escalada"===a.status?e("b-badge",{attrs:{variant:"success"}},[t._v("Escalada")]):t._e(),"Rechazada"===a.status?e("b-badge",{attrs:{variant:"danger"}},[t._v("Rechazada")]):t._e(),"Archivada"===a.status?e("b-badge",{attrs:{variant:"primary"}},[t._v("Archivada")]):t._e(),"Cerrada"===a.status?e("b-badge",{attrs:{variant:"success"}},[t._v("Cerrada")]):t._e(),"Creada"===a.status?e("b-badge",{attrs:{variant:"primary"}},[t._v("Creada")]):t._e(),"Aceptada"===a.status?e("b-badge",{attrs:{variant:"success"}},[t._v("Aceptada por analista")]):t._e(),"Devuelta"===a.status?e("b-badge",{attrs:{variant:"warning"}},[t._v("Devuelta")]):t._e(),e("p",{staticClass:"lead text-danger"},[t._v(t._s(t._f("capitalize")(a.vencimiento_tecnico)))]),e("a",{staticStyle:{color:"#000"},attrs:{href:"llamada_ath_tablero/"+a.id}},[e("button",{staticClass:"btn btn-success btn-block",attrs:{type:"button","data-toggle":"button","aria-pressed":"false"}},[t._v("Gestionar")])])],1)],1)],1)],1)],1)})),0)]),e("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[e("b-spinner",{attrs:{type:"border",small:""}}),t._v(" Tab 2 ")]},proxy:!0}])},[e("p",{staticClass:"p-3"},[t._v("Tab contents 2")])])],1)],1)])])])]),e("b-modal",{attrs:{id:"modal_rechazo",false:"",size:"lg",title:"Rechazar","hide-footer":""}},[e("ValidationObserver",{ref:"form"},[e("b-row",[e("b-col",[e("div",{staticClass:"form-group"},[e("label",[t._v("Motivo de rechazo")]),e("ValidationProvider",{attrs:{name:"motivo escalado",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var r=a.errors;return[e("b-form-textarea",{attrs:{id:"motivo_rechazo",placeholder:"Enter something...",rows:"3","max-rows":"6"},model:{value:t.form.motivo_rechazo,callback:function(a){t.$set(t.form,"motivo_rechazo",a)},expression:"form.motivo_rechazo"}}),e("span",{staticStyle:{color:"red"}},[t._v(t._s(r[0]))])]}}])})],1)])],1)],1),t.form.motivo_rechazo?e("button",{staticClass:"btn btn-block float-right btn-danger",on:{click:function(a){return t.enviarRechazo()}}},[t._v("Enviar")]):t._e()],1)],1)},o=[],s=e("ade3"),i=e("1da1"),n=e("5530"),c=(e("96cf"),e("92c3")),d=e.n(c),l=e("2f62"),u=e("7bb1"),m=e("5658"),h=e("2579"),f=e("c1df"),v=e.n(f),p=Object(s["a"])({components:{vueDropzone:d.a,Layout:m["a"],PageHeader:h["a"],ValidationProvider:u["b"],ValidationObserver:u["a"]},data:function(){return{title:"Gestion Tecnica",items:[{text:"Servicios pendiente por cerrar"}],dropzoneOptions:{thumbnailWidth:150,maxFilesize:.5,headers:{"My-Awesome-Header":"header value"}},ver:!1,url:"",url_firma:"",modal:!0,file:null,firma:null,email:"",password:"",totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:["cargo","descripcion","actions"],cargos:[],serviciosAth:[],editMode:!1,form:{id:"",cargo:"",descripcion:"",motivo_rechazo:""}}},computed:Object(n["a"])({},Object(l["d"])(["counter"])),filters:{capitalize:function(t){if(!t)return"";var a=v()();return a.diff(t,"hours")>0?-1*a.diff(t,"hours")+" horas vencido.":-1*a.diff(t,"hours")+" horas para caducar."}},methods:Object(n["a"])(Object(n["a"])({onFiltered:function(t){this.totalRows=t.length,this.currentPage=1}},Object(l["b"])(["guardarUsuario"])),{},{solicitudAth:function(t){localStorage.setItem("consecutivo",JSON.stringify(t)),this.$router.push({path:"llamada_ath_tablero"})},switchLoc:function(){var t=this;this.editMode?this.$refs.form.validate().then((function(a){a&&t.editarCargos()})):this.$refs.form.validate().then((function(a){a&&t.agregarCargo()}))},rechazar:function(t){this.form.id=t.id,this.form.coordinador_id=t.coordinador_id,this.form.motivo_rechazo="",this.$root.$emit("bv::show::modal","modal_rechazo","#btnShow")},enviarRechazo:function(){var t=this;this.$swal({title:"Desea rechazar esta programación?",icon:"question",iconHtml:"",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,showCloseButton:!0}).then((function(a){a.isConfirmed&&t.procesarRechazo()}))},procesarRechazo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=new FormData,e.append("id",t.form.id),e.append("coordinador_id",t.form.coordinador_id),e.append("motivo_rechazo",t.form.motivo_rechazo),a.next=6,t.axios.post("/api/tecnico/programacion/ath/rechazar",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){200==a.status&&(t.$swal("Rechazado con exito!","","success"),t.listarServicios(),t.$root.$emit("bv::hide::modal","modal_rechazo","#btnShow"))})).catch((function(a){t.$swal(a.response.data)}));case 6:case"end":return a.stop()}}),a)})))()},agregarCargo:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(o in e=new FormData,r=t.form,r)e.append(o,r[o]);return a.next=5,t.axios.post("api/cargos",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){if(200==a.status)for(var e in t.$swal("Agregado exito!","","success"),t.listarCargos(),t.$root.$emit("bv::hide::modal","modal","#btnShow"),r)t.form[e]=""})).catch((function(a){console.log(a.response.data.menssage),t.$swal(a.response.data)}));case 5:case"end":return a.stop()}}),a)})))()},editarCargos:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var e,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(o in e=new FormData,r=t.form,r)e.append(o,r[o]);return a.next=5,t.axios.put("api/cargos",e).then((function(a){if(200==a.status)for(var e in t.$swal("Editado con exito","","success"),t.listarCargos(),t.$root.$emit("bv::hide::modal","modal","#btnShow"),r)t.form[e]=""})).catch((function(a){t.$swal("ocurrio un problema","","warning")}));case 5:case"end":return a.stop()}}),a)})))()},eliminarCargos:function(t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("id",t),e.next=4,a.axios.post("api/cargos/delete",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200==t.status&&(a.$swal("Eliminado con exito!","","success"),a.listarCargos())})).catch((function(t){console.log(t.response.data.menssage),a.$swal(t.response.data)}));case 4:case"end":return e.stop()}}),e)})))()},eliminarCargo:function(t){var a=this;this.$swal({title:"Desea borrar este cargo?",icon:"question",iconHtml:"",confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,showCloseButton:!0}).then((function(e){e.isConfirmed&&a.eliminarCargos(t)}))},resete:function(){var t=this.form;for(var a in t)this.form[a]=""},setear:function(t){for(var a=0;a<this.cargos.length;a++)if(this.cargos[a].id===t)return this.form.id=this.cargos[a].id,this.form.cargo=this.cargos[a].cargo,this.form.descripcion=this.cargos[a].descripcion,void this.$root.$emit("bv::show::modal","modal","#btnShow")},listarServicios:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.axios.get("api/programacion/ath/servicios").then((function(a){t.serviciosAth=a.data})).catch((function(t){console.log("error"+t)}));case 2:case"end":return a.stop()}}),a)})))()},session:function(){if(localStorage.getItem("token")){var t=localStorage.getItem("token");this.guardarUsuario(t)}else this.$router.push({name:"Home"})}}),created:function(){this.session(),this.listarServicios()},mounted:function(){}},"computed",Object(n["a"])(Object(n["a"])({},Object(l["d"])(["usuarioDB"])),{},{rows:function(){return this.cargos.length}})),b=p,g=e("2877"),_=Object(g["a"])(b,r,o,!1,null,null,null);a["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2d0b62fc.4389171b.js.map