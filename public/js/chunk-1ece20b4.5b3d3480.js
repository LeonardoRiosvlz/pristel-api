(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ece20b4"],{"019a":function(e,t,s){},"25f1":function(e,t,s){"use strict";s("019a")},"411d":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",[s("PageHeader",{attrs:{title:e.title,items:e.items}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card",staticStyle:{"min-height":"700px"}},[s("div",{staticClass:"p-4 row justify-content-center"},[s("div",{staticClass:" px-3 col-12 row justify-content-center"},[s("img",{staticStyle:{"border-radius":"100%"},attrs:{src:e.user.imagen,width:"200px",height:"200px",alt:""}})]),s("hr"),s("div",{staticClass:" px-3 col-12"},[s("h3",{staticClass:"mb-2 nombre"},[e._v(e._s(e.user.nombre)+" "+e._s(e.user.apellido))]),s("p",[e._v(e._s(e.user.tipo))])]),s("button",{staticClass:"btn btn-info m-3",on:{click:function(t){return e.editar()}}},[e._v("Editar imagen "),s("i",{staticClass:"ri-image-2-line"})]),s("button",{staticClass:"btn btn-success m-3",on:{click:function(t){return e.setPass()}}},[e._v("Editar contraseña "),s("i",{staticClass:"ri-lock-password-line"})]),s("div",{staticClass:"col-12"},[s("table",{staticClass:"table"},[e.user.tipo_tecnico?s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Tipo de tecnico")]),s("td",[e._v(e._s(e.user.tipo_tecnico))])]):e._e(),e.user.email?s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Email")]),s("td",[e._v(e._s(e.user.email))])]):e._e(),e.user.sexo?s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Sexo")]),s("td",[e._v(e._s(e.user.sexo))])]):e._e(),e.user.cargo?s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Cargo")]),s("td",[e._v(e._s(e.user.cargo))])]):e._e(),e.user.telefono?s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Telefono")]),s("td",[e._v(e._s(e.user.telefono))])]):e._e(),e.user.direccion?s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Direccion")]),s("td",[e._v(e._s(e.user.direccion))])]):e._e(),null===!e.user.nequi||e.user.nequi?s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Nequi")]),s("td",[e._v(e._s(e.user.nequi))])]):e._e(),e.user.nombre_cuenta?s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Banco")]),s("td",[e._v(e._s(e.user.nombre_cuenta))])]):e._e(),e.user.cuenta?s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Cuenta")]),s("td",[e._v(e._s(e.user.cuenta))])]):e._e()])])])])])]),s("b-modal",{attrs:{id:"modal",false:"",size:"lg",title:"Gestión de usuarios","hide-footer":""}},[s("ValidationObserver",{ref:"form"},[s("b-row",{staticClass:"m-2",attrs:{"align-v":"center"}},[s("b-col",[s("div",{attrs:{id:"preview"}},[e.url?s("img",{staticClass:"rounded",staticStyle:{float:"center!importan"},attrs:{width:"90%",src:e.url}}):e._e()]),s("b-form-file",{staticClass:"mt-3",attrs:{plain:""},on:{change:e.onFileChange},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1)],1),s("button",{staticClass:"btn btn-block btn-success",on:{click:function(t){return e.switchLoc()}}},[e._v("Editar Perfil")])],1),s("b-modal",{attrs:{id:"modalPass",false:"",size:"md",title:"Gestión de contraseña","hide-footer":""}},[s("ValidationObserver",{ref:"formPass"},[s("b-row",[s("b-col",[s("div",{staticClass:"form-group"},[s("label",[e._v("Contraseña")]),s("ValidationProvider",{attrs:{name:"password",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:" "},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}}),s("span",{staticStyle:{color:"red"}},[e._v(e._s(r[0]))])]}}])})],1)])],1),s("b-row",[s("b-col",[s("div",{staticClass:"form-group"},[s("label",[e._v("Confirmar contraseña")]),s("ValidationProvider",{attrs:{name:"repass",rules:"required|confirmed:password"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.form.repass,expression:"form.repass"}],staticClass:"form-control",attrs:{type:"password",placeholder:" "},domProps:{value:e.form.repass},on:{input:function(t){t.target.composing||e.$set(e.form,"repass",t.target.value)}}}),s("span",{staticStyle:{color:"red"}},[e._v(e._s(r[0]))])]}}])})],1)])],1)],1),s("button",{staticClass:"btn btn-block btn-success",on:{click:function(t){return e.switchLocPass()}}},[e._v("Editar Contraseña")])],1)],1)},o=[],a=s("1da1"),i=s("5530"),n=(s("2b3d"),s("d3b7"),s("3ca3"),s("ddb0"),s("96cf"),s("2f62")),c=s("7bb1"),l=s("5658"),u=s("2579"),d={components:{Layout:l["a"],PageHeader:u["a"],ValidationProvider:c["b"],ValidationObserver:c["a"]},data:function(){return{title:"Administracion",items:[{text:"Perfil"}],dropzoneOptions:{thumbnailWidth:150,maxFilesize:.5,headers:{"My-Awesome-Header":"header value"}},ver:!1,url:"",url_firma:"",modal:!0,file:null,firma:null,email:"",password:"",totalRows:1,currentPage:1,perPage:10,pageOptions:[10,25,50,100],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,fields:["nombre_tercero","descripcion_tercero","actions"],user:[],terceros:[],editMode:!1,form:{id:"",nombre:"",username:"",apellido:"",email:"",telefono:"",tipo:"",sexo:"",entidad:"",cargo:"",codigo:"",foto:"",password:"",repass:"",roles:""}}},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(n["b"])(["guardarUsuario"])),Object(n["b"])(["cerrarSession"])),{},{salir:function(){localStorage.removeItem("token"),this.$router.push({name:"Home"}),this.cerrarSession()},session:function(){if(localStorage.getItem("token")){var e=localStorage.getItem("token");this.guardarUsuario(e)}else this.$router.push({name:"Home"})},listarUsers:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.axios.get("api/user/pefil").then((function(t){e.user=t.data,console.log(t.data)})).catch((function(e){console.log("error"+e)}));case 2:case"end":return t.stop()}}),t)})))()},editar:function(){this.form.nombre=this.user.nombre,this.form.apellido=this.user.apellido,this.form.email=this.user.email,this.form.telefono=this.user.telefono,this.form.tipo=this.user.tipo,this.form.sexo=this.user.sexo,this.form.entidad=this.user.entidad,this.form.cargo=this.user.cargo,this.form.codigo=this.user.codigo,this.form.imagen=this.user.imagen,this.$root.$emit("bv::show::modal","modal","#btnShow")},setPass:function(){this.$root.$emit("bv::show::modal","modalPass","#btnShow")},login:function(){},switchLoc:function(){var e=this;this.$refs.form.validate().then((function(t){t&&e.editarUsuario()}))},switchLocPass:function(){var e=this;this.$refs.formPass.validate().then((function(t){t?e.editarPassword():e.$swal("Contraseñas no coinciden!","warning")}))},editarUsuario:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(o in s=new FormData,e.file&&s.append("filename",e.file),r=e.form,r)s.append(o,r[o]);return t.next=6,e.axios.put("api/user/pefil",s).then((function(t){if(200==t.status)for(var s in e.listarUsers(),e.$swal("Usuario Editardo","","success"),e.guardarUsuario(t.data.accessToken),e.$root.$emit("bv::hide::modal","modal","#btnShow"),r)e.form[s]=""})).catch((function(t){console.log(t.response.data.menssage),e.$swal("No se pudo editar","","warning")}));case 6:case"end":return t.stop()}}),t)})))()},editarPassword:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(o in s=new FormData,r=e.form,r)s.append(o,r[o]);return t.next=5,e.axios.put("auth/recover-password",s).then((function(t){if(200==t.status)for(var s in e.$swal("Contraseña Editada","","success"),e.$root.$emit("bv::hide::modal","modalPass","#btnShow"),r)e.form[s]=""})).catch((function(t){console.log(t.response.data.menssage),e.$swal("No se pudo editar","","warning")}));case 5:case"end":return t.stop()}}),t)})))()},onFileChange:function(e){var t=e.target.files[0];this.url=URL.createObjectURL(t)},toggleModal:function(){this.modal=!this.modal}}),created:function(){this.session(),this.listarUsers()},computed:Object(i["a"])(Object(i["a"])({},Object(n["d"])(["usuarioDB"])),{},{rows:function(){return this.user.length}})},m=d,f=(s("25f1"),s("2877")),p=Object(f["a"])(m,r,o,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-1ece20b4.5b3d3480.js.map